# 数据推送

数据推送是通过回调的方式实现，也就是客户需要在平台上配置回调地址，给平台调用把数据发送给客户应用服务器。

目前支持推送的数据类型有：

* 功能点数据：设备端上报的功能点数据，分为三类：属性、事件、服务
* 设备状态：设备上线和下线的状态

## 回调接口设计说明

### 设计规范

客户在定义回调接口时，需要遵循下面的规范

1. 回调接口统一使用post方法
2. param参数可选，目前平台只支持填写apikey
3. body请求的数据格式按照ujson格式处理
4. 收到平台的数据后，必须并严格按照规定数据格式响应

### 参考示例

#### api参考

> https://api.example.com/iot/v1/callback

#### body格式如下

```text
{
	"payload": {
		"method": "",
		"profile": {
			"customer_uuid": "",
			"product_uuid": "",
			"device_uuid": ""
		},
		"datapoint": {
			"cmd": "",
			"para": {

			}
		},
		"version": "1.0.1",
		"msgid": "",
		"ts": 1599823075475
	},
	"type": "",
	"ts": 1606103322705
}
```

#### 响应格式

必须把平台回调过来的msgid作为参数，要不然平台会认为回调失败

```text
{
	"code":200,
  "msgid":"23423424234"
}
```




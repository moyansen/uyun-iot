# 附录

## 附录0：一些约定 

### 1、数据类型 

由于主要面向MCU等嵌入式系统应用，为了方便用户使用、程序开发，显示终端使用的数据采用整数（字）、无符号整数（字）、长整数（双字）、超长整数（4个字）表示，相关表示范围如下：

![](../../.gitbook/assets/image%20%288%29.png)

> 小数采用定点小数表示，用户自定义小数位数。比如0x4D2（1234），规定小数位数为2位时，表示12.34。

### 2、色彩定义 

所有颜色数据位宽为16bit，2个字节，可以显示的颜色为216级色彩，即65536级色彩；其格式Red\(5bit\) – Green\(6bit\) – Blue\(5bit\)，即表示红色参数的数据占最高5位，表示绿色参数的数据占中间6位，表示蓝色参数的数据占最低5位；如下表所示

![](../../.gitbook/assets/image%20%28166%29.png)

> 示例： 红色 0xF800 绿色 0x07E0 蓝色 0x001F 白色 0xFFFF 黑色 0x0000

### 3、CRC-16校验参考代码

```c
static const uint16_t crc16L[] =
{
    0x0000, 0xC0C1, 0xC181, 0x0140,
    0xC301, 0x03C0, 0x0280, 0xC241,
    0xC601, 0x06C0, 0x0780, 0xC741,
    0x0500, 0xC5C1, 0xC481, 0x0440,
};

static const uint16_t crc16H[] =
{
    0x0000, 0xCC01, 0xD801, 0x1400,
    0xF001, 0x3C00, 0x2800, 0xE401,
    0xA001, 0x6C00, 0x7800, 0xB401,
    0x5000, 0x9C01, 0x8801, 0x4400,
};

uint16_t CRC16(uint16_t BraekPoint, uint8_t *Buffer, uint32_t Length)
{
    uint16_t CRCValue;
    uint8_t Dat;
    CRCValue = BraekPoint;
    while(Length--)
    {
        Dat = *Buffer++;
        Dat ^= CRCValue;
        CRCValue >>= 8;
        CRCValue ^= crc16L[Dat & 0x0F];
        CRCValue ^= crc16H[(Dat>>4) & 0x0F];
    }
    return CRCValue;
}
```

当使能CRC 帧校验应答【即R2.4 为1 且RC.3 为1】时，AG 系列显示终端会在CRC 校验后自动应答校验情况， 返回信息如下表所示：

![](../../.gitbook/assets/image%20%2845%29.png)



## 附录1：字库

### 1、字模提取

字库中，每一个字的字模均采用先行后列存储方式；编码规则：先行后列，水平（X 轴）方向：从左到右编码，垂直（Y 轴）方 向：由上向下编码。高位优先的扫描存储方式，位宽一个字节，从高位向低位取数据，如下图所示：

![](../../.gitbook/assets/image%20%2837%29.png)

### 2、显示终端默认字库编码简介

#### 2.1、ASCII 编码

目前计算机中用得最广泛的字符集及其编码，是由美国国家标准局\(ANSI\)制定的ASCII码（American Standard Code for Information Interchange，美国标准信息交换码），它已被国际标准化组织（ISO）定为国际标准，称为ISO-646标准，适用于所有拉丁文字字母。ASCII 码用八位二进制编码，共有256个字符或符号，包括所有英文字符和阿拉伯数字等。

#### 2.2、GB2312 中文编码

GB2312或GB2312-80是一个简体中文字符集的中国国家标准，全称为《信息交换用汉字编码字符集·基本集》，又称为GB0，由中国 国家标准总局发布，1981年5月1日实施。GB2312编码通行于中国大陆，新加坡等地也采用此编码。中国大陆几乎所有的中文系统和国际 化的软件都支持GB2312。GB2312标准共收录6,763个汉字，其中一级汉字3,755个，二级汉字3,008个；同时GB2312收录了包括拉丁字母、 希腊字母、日文平假名及片假名字母、俄语西里尔字母在内的682个全角字符。GB2312的出现，基本满足了汉字的计算机处理需要，它 所收录的汉字已经覆盖中国大陆99.75%的使用频率。对于人名、古汉语等方面出现的罕用字，GB2312不能处理，这导致了后来GBK及 GB18030汉字字符集的出现。

#### 2.3、GBK 中文编码

GBK即汉字内码扩展规范，K 为扩展的汉语拼音中“扩”字的声母。英文全称Chinese Internal Code Specification。GBK 编码标准兼容 GB2312，共收录汉字21,003个、符号883个，并提供1,894个造字码位，简、繁体字融于一库。GB2312码是中华人民共和国国家汉字信息 交换用编码，全称《信息交换用汉字编码字符集—— 基本集》，1980年由国家标准总局发布。基本集共收入汉字6,763个和非汉字图形字符682个，通行于中国大陆，新加坡等地也使用此编码。GBK是对GB2312-80的扩展，也就是CP936字码表\(Code Page 936\)的扩展（之 前CP936和GB2312-80一模一样）。

#### 2.4、Unicode 通用字符编码

Unicode（统一码、万国码、单一码）是一种在计算机上使用的字符编码。它为每种语言中的每个字符设定了统一并且唯一的二进 制编码，以满足跨语言、跨平台进行文本转换、处理的要求。1990年开始研发，1994年正式公布。随着计算机工作能力的增强，Unicode 也在面世以来的十多年里得到普及。

Unicode是国际组织制定的可以容纳世界上所有文字和符号的字符编码方案。Unicode用数字0 - 0x10FFFF来映射这些字符，最多可以 容纳1,114,112个字符，或者说有1,114,112个码位。码位就是可以分配给字符的数字。

#### 2.5、BIG-5 繁体中文编码

BIG-5码是通行于台湾、香港地区的一个繁体字编码方案，俗称“大五码”。地区标准号为：CNS11643。BIG-5码是使用繁体中文社 群中最常用的电脑汉字字符集标准，共收录13,060个中文字，其中有二字为重覆编码，BIG-5属中文内码（中文码分为中文内码及中文交 换码两类）。BIG-5虽普及于中国的台湾、香港与澳门等繁体中文通行区，但长期以来并非当地的国家标准，而只是业界标准（de facto standard）。倚天中文系统、Windows等主要系统的字符集都是以BIG-5为基准，但厂商又各自增删，衍生成多种不同版本。

